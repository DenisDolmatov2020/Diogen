# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–±–æ—Ç–µ —Å Reference ID

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö `reference_id` –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ —Ç–µ–∫—É—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –≤–º–µ—Å—Ç–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π, –ø—Ä–æ–ø–∏—Å–∞–Ω–Ω—ã—Ö –≤ –∫–æ–Ω—Ñ–∏–≥–∞—Ö.

## –§–æ—Ä–º–∞—Ç Reference ID

```
PROJECT_ID.USER_ID.TIMESTAMP
```

- **PROJECT_ID** - ID –ø—Ä–æ–µ–∫—Ç–∞ –∏–∑ `VITE_PROJECT_ID` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 000)
- **USER_ID** - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ `VITE_USER_ID` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 3654823)  
- **TIMESTAMP** - Unix timestamp –≤ —Å–µ–∫—É–Ω–¥–∞—Ö

–ü—Ä–∏–º–µ—Ä: `000.3654823.1745947893`

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ —Ñ–∞–π–ª `.env`:

```env
# Reference ID Configuration
VITE_PROJECT_ID=000
VITE_USER_ID=3654823
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö reference_id –∏–∑ –∫–æ–Ω—Ñ–∏–≥–æ–≤

–°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç (–±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è):
```json
{
  "component_name": "info_panel",
  "action_params": [
    {
      "variable": "reference_id",
      "data": "000.3654823.1745947893"
    }
  ]
}
```

–ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç (–±–µ–∑ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ reference_id):
```json
{
  "component_name": "info_panel", 
  "action_params": [
    {
      "variable": "keys",
      "data": ["19003", "19004"]
    }
  ]
}
```

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ reference_id

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–Ω—Ñ–∏–≥–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–π `reference_id` –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∏–∑ localStorage
- –î–æ–±–∞–≤–ª—è–µ—Ç `reference_id` –∫–æ –≤—Å–µ–º –±–ª–æ–∫–∞–º –≤ –∫–æ–Ω—Ñ–∏–≥–µ
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç `reference_id` –≤ localStorage –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Reference ID

–í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "üÜî ID" –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

- **–ü—Ä–æ—Å–º–æ—Ç—Ä** —Ç–µ–∫—É—â–µ–≥–æ reference_id
- **–°–æ–∑–¥–∞–Ω–∏–µ** –Ω–æ–≤–æ–≥–æ reference_id
- **–û—á–∏—Å—Ç–∫–∞** —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ reference_id
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

## API —Ñ—É–Ω–∫—Ü–∏–∏

### `generateReferenceId()`
–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π reference_id.

### `getOrCreateReferenceId()`
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π reference_id –∏–ª–∏ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π.

### `saveReferenceId(id: string)`
–°–æ—Ö—Ä–∞–Ω—è–µ—Ç reference_id –≤ localStorage.

### `getCurrentReferenceId()`
–ü–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â–∏–π reference_id –∏–∑ localStorage.

### `clearReferenceId()`
–£–¥–∞–ª—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π reference_id.

### `injectReferenceId(treeBlocks: TreeBlock[])`
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–Ω–µ–¥—Ä—è–µ—Ç reference_id –≤–æ –≤—Å–µ –±–ª–æ–∫–∏ –∫–æ–Ω—Ñ–∏–≥–∞.

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å** - –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
2. **–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ timestamp
3. **–ì–∏–±–∫–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –∏–∑–º–µ–Ω—è—Ç—å PROJECT_ID –∏ USER_ID —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
4. **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - reference_id —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏
5. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤** - –Ω–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ –∫–æ–Ω—Ñ–∏–≥–∞—Ö

## –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–Ω—Ñ–∏–≥–æ–≤

–î–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–Ω—Ñ–∏–≥–æ–≤:

1. –£–¥–∞–ª–∏—Ç–µ –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `reference_id` –∏–∑ JSON –∫–æ–Ω—Ñ–∏–≥–æ–≤
2. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–∏—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ reference_id –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è `VITE_PROJECT_ID` –∏ `VITE_USER_ID`

## –û—Ç–ª–∞–¥–∫–∞

–°–∏—Å—Ç–µ–º–∞ –≤—ã–≤–æ–¥–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª—å:
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö reference_id
- –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ñ–∏–≥–∏
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ localStorage
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞ –∫–æ–Ω—Ñ–∏–≥–∞

–ü—Ä–∏–º–µ—Ä –ª–æ–≥–æ–≤:
```
üÜî [generateReferenceId] –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–π reference_id: {...}
üîß [injectReferenceId] –í–Ω–µ–¥—Ä—è–µ–º reference_id: 000.3654823.1745947893
  üîç –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –±–ª–æ–∫: info_panel
    ‚ûï –î–æ–±–∞–≤–ª—è–µ–º reference_id: 000.3654823.1745947893
‚úÖ [injectReferenceId] reference_id —É—Å–ø–µ—à–Ω–æ –≤–Ω–µ–¥—Ä–µ–Ω –≤–æ –≤—Å–µ –±–ª–æ–∫–∏
``` 