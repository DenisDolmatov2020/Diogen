# üöÄ –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## üéØ –¶–µ–ª—å
–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∏–¥–∂–µ—Ç–∞ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, https://diogen-chat-widget.surge.sh).

## ‚ö° –°–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± - Railway

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç GitHub
# –ó–∞–ø—É—à—å—Ç–µ –∫–æ–¥ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git add .
git commit -m "–î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä"
git push origin main
```

### 2. –î–µ–ø–ª–æ–π –Ω–∞ Railway
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [Railway.app](https://railway.app)
2. –í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ GitHub
3. –ù–∞–∂–º–∏—Ç–µ "New Project" ‚Üí "Deploy from GitHub repo"
4. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
5. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç Node.js –ø—Ä–æ–µ–∫—Ç
6. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —É–∫–∞–∂–∏—Ç–µ:
   - **Root Directory**: `proxy-server`
   - **Build Command**: `npm install`
   - **Start Command**: `npm start`
7. –ù–∞–∂–º–∏—Ç–µ "Deploy"

### 3. –ü–æ–ª—É—á–∏—Ç–µ URL
–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è Railway –ø–æ–∫–∞–∂–µ—Ç URL –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä:
```
https://diogen-proxy-production-abc123.up.railway.app
```

### 4. –û–±–Ω–æ–≤–∏—Ç–µ –≤–∏–¥–∂–µ—Ç
–ó–∞–º–µ–Ω–∏—Ç–µ URL –≤ —Ñ–∞–π–ª–µ `widget/diogen-chat-widget-with-external-proxy.js`:
```javascript
externalProxyUrl: 'https://diogen-proxy-production-abc123.up.railway.app/proxy'
```

## üîÑ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ - Render.com

### 1. –î–µ–ø–ª–æ–π –Ω–∞ Render
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [Render.com](https://render.com)
2. –í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ GitHub
3. –ù–∞–∂–º–∏—Ç–µ "New" ‚Üí "Web Service"
4. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
5. –ù–∞—Å—Ç—Ä–æ–π–∫–∏:
   - **Name**: `diogen-cors-proxy`
   - **Root Directory**: `proxy-server`
   - **Build Command**: `npm install`
   - **Start Command**: `npm start`
6. –ù–∞–∂–º–∏—Ç–µ "Create Web Service"

### 2. –ü–æ–ª—É—á–∏—Ç–µ URL
Render –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç URL —Ç–∏–ø–∞:
```
https://diogen-cors-proxy.onrender.com
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –ø—Ä–æ–∫—Å–∏
–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
https://your-proxy-url.com/health
```

–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```json
{
  "status": "OK",
  "timestamp": "2024-01-01T12:00:00.000Z",
  "uptime": 123.45
}
```

### 2. –¢–µ—Å—Ç CORS
–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ https://diogen-chat-widget.surge.sh –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```javascript
fetch('https://your-proxy-url.com/proxy', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json',
        'X-Target-URL': 'https://knowledge.slovo-soft.ru/api/v1/mentorium',
        'X-TOKEN': btoa('pfki:pfki')
    },
    body: JSON.stringify([{
        component_name: "meta_data",
        parent_block_id: "block-0-1",
        action_mode: "dialog",
        action_params: [
            { variable: "input_text", data: "—Ç–µ—Å—Ç" },
            { variable: "reference_id", data: "000.3654823.1234567890" }
        ]
    }])
})
.then(r => r.json())
.then(console.log)
.catch(console.error);
```

## üîß –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π HTML —Ñ–∞–π–ª –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```html
<!DOCTYPE html>
<html>
<head>
    <title>–¢–µ—Å—Ç —Å –≤–Ω–µ—à–Ω–∏–º –ø—Ä–æ–∫—Å–∏</title>
</head>
<body>
    <h1>–¢–µ—Å—Ç –≤–∏–¥–∂–µ—Ç–∞ —Å –≤–Ω–µ—à–Ω–∏–º –ø—Ä–æ–∫—Å–∏</h1>
    
    <script>
        // –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å –≤–∞—à–∏–º –ø—Ä–æ–∫—Å–∏
        window.DIOGEN_CONFIG = {
            externalProxyUrl: 'https://your-proxy-url.com/proxy'
        };
    </script>
    <script src="diogen-chat-widget-with-external-proxy.js"></script>
</body>
</html>
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –û–±–Ω–æ–≤–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –≤–∏–¥–∂–µ—Ç
–í —Ñ–∞–π–ª–µ `widget/diogen-chat-widget.js` –Ω–∞–π–¥–∏—Ç–µ `generateProxyUrl()` –∏ –¥–æ–±–∞–≤—å—Ç–µ:
```javascript
generateProxyUrl() {
    const isLocalhost = window.location.hostname === 'localhost';
    
    if (isLocalhost) {
        return '/api/proxy';
    } else {
        // –î–ª—è —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤–Ω–µ—à–Ω–∏–π –ø—Ä–æ–∫—Å–∏
        return 'https://your-proxy-url.com/proxy';
    }
}
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ Railway
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Railway
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "Deployments"
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∞–∫—Ç–∏–≤–Ω—ã–π –¥–µ–ø–ª–æ–π
4. –û—Ç–∫—Ä–æ–π—Ç–µ "View Logs"

### –õ–æ–≥–∏ Render
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–µ—Ä–≤–∏—Å –≤ Render
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "Logs"
3. –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –≠—Ç–æ—Ç –ø—Ä–æ–∫—Å–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è!

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
1. –î–æ–±–∞–≤—å—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
2. –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ–º–µ–Ω—ã
3. –î–æ–±–∞–≤—å—Ç–µ rate limiting
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ HTTPS

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ "Application failed to respond"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ PORT –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–µ—Ä–≤–µ—Ä —Å–ª—É—à–∞–µ—Ç `0.0.0.0`, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ `localhost`

### CORS –æ—à–∏–±–∫–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø—Ä–æ–∫—Å–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ URL –ø—Ä–æ–∫—Å–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

### 404 –æ—à–∏–±–∫–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ endpoint `/proxy` –¥–æ—Å—Ç—É–ø–µ–Ω
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö —à–∞–≥–æ–≤ –≤–∏–¥–∂–µ—Ç –Ω–∞ https://diogen-chat-widget.surge.sh –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ –≤–∞—à –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä! üéâ 